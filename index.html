<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Українські Наголоси - Флеш-картки</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f8f9fa;
        }
        .container {
            width: 100%;
            max-width: 800px;
            padding: 0 16px; /* Додаємо бокові відступи */
            margin: 1rem auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box; /* Щоб відступи враховувались у ширину */
        }
        .header {
            margin-bottom: 2rem;
            text-align: center;
            width: 100%;
        }
        .card-container {
            position: relative;
            width: 100%;
            height: 300px;
            perspective: 1000px;
            margin-bottom: 2rem;
        }
        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        .card.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 2em;
            text-align: center;
            padding: 1rem;
            box-sizing: border-box;
        }
        .card-front {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        .card-back {
            background-color: #d4edda;
            color: #155724;
            transform: rotateY(180deg);
        }
        .controls {
            display: flex;
            width: 100%;
            justify-content: space-between;
            margin-bottom: 1rem;
            gap: 10px; /* Додаємо відстань між кнопками */
        }
        .nav-button {
            padding: 0.75rem 1rem; /* Зменшуємо горизонтальні відступи для малих екранів */
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1; /* Кнопки займають пропорційно доступний простір */
            text-align: center;
            justify-content: center;
        }
        .btn-dont-know {
            background-color: #f8d7da;
            color: #721c24;
        }
        .btn-dont-know:hover {
            background-color: #f5c6cb;
        }
        .btn-know {
            background-color: #d4edda;
            color: #155724;
        }
        .btn-know:hover {
            background-color: #c3e6cb;
        }
        .progress {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 1rem;
        }
        .progress-bar {
            height: 100%;
            background-color: #28a745;
            border-radius: 5px;
            transition: width 0.3s;
        }
        .info {
            display: flex;
            width: 100%;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap; /* Дозволяємо перенос на малих екранах */
        }
        .info > div {
            margin-bottom: 8px; /* Відступ знизу для мобільних */
        }
        .category-label {
            font-size: 1.5em;
            color: #6c757d;
            margin-bottom: 0.5rem;
            text-align: center;
            width: 100%;
        }
        .reset-button {
            padding: 0.5rem 1rem;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.3s;
        }
        .reset-button:hover {
            background-color: #5a6268;
        }
        .letter-index {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
            justify-content: center;
            width: 100%;
        }
        .letter-button {
            padding: 0.5rem;
            min-width: 2rem;
            text-align: center;
            background-color: #e9ecef;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .letter-button:hover {
            background-color: #ced4da;
        }
        .letter-button.active {
            background-color: #007bff;
            color: white;
        }
        
        /* Стилі для вкладок */
        .tabs {
            display: flex;
            width: 100%;
            margin-bottom: 2rem;
            border-bottom: 1px solid #dee2e6;
        }
        .tab {
            padding: 0.75rem 1rem; /* Зменшуємо горизонтальні відступи */
            cursor: pointer;
            border: 1px solid transparent;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            margin-bottom: -1px;
            transition: background-color 0.3s;
            text-align: center;
            flex: 1; /* Кнопки займають пропорційно доступний простір */
        }
        .tab:hover {
            background-color: #f8f9fa;
        }
        .tab.active {
            border-color: #dee2e6 #dee2e6 #fff;
            background-color: #fff;
            color: #495057;
            font-weight: bold;
        }
        
        /* Стилі для сторінок */
        .page {
            display: none;
            width: 100%;
        }
        .page.active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Стилі для таблиці слів */
        .words-table-container {
            width: 100%;
            margin-bottom: 2rem;
            overflow-x: auto; /* Горизонтальна прокрутка для малих екранів */
            overflow-y: auto;
            max-height: 400px;
        }
        .words-table {
            width: 100%;
            border-collapse: collapse;
        }
        .words-table th, .words-table td {
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            text-align: left;
        }
        .words-table th {
            background-color: #f8f9fa;
            position: sticky;
            top: 0;
        }
        .words-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .words-table tr:hover {
            background-color: #e9ecef;
        }
        .delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 0.25rem 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        
        /* Стилі для форми додавання слова */
        .add-word-form {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            box-sizing: border-box;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .form-group label {
            font-weight: bold;
        }
        .form-group input, .form-group select {
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 3px;
            font-size: 1rem;
        }
        .form-group small {
            color: #6c757d;
            font-size: 0.85rem;
        }
        .submit-btn {
            padding: 0.75rem 1.5rem;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            align-self: flex-start;
        }
        .submit-btn:hover {
            background-color: #218838;
        }
        
        /* Стилі для сповіщень */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem;
            border-radius: 5px;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transform: translateX(120%);
            transition: transform 0.3s;
            z-index: 1000;
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.success {
            background-color: #28a745;
        }
        .notification.error {
            background-color: #dc3545;
        }
        
        /* Стилі для кнопки експорту/імпорту */
        .export-import-container {
            width: 100%;
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap; /* Дозволяємо перенос на малих екранах */
        }
        .export-btn, .import-btn {
            padding: 0.5rem 1rem;
            background-color: #17a2b8;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            flex: 1; /* Розтягуємо кнопки на малих екранах */
            min-width: 120px; /* Мінімальна ширина кнопки */
            text-align: center;
        }
        .export-btn:hover, .import-btn:hover {
            background-color: #138496;
        }
        .file-input {
            display: none;
        }
        
        /* Медіа-запити для різних розмірів екрану */
        @media (max-width: 576px) {
            .container {
                padding: 0 16px;
            }
            .card-face {
                font-size: 1.5em; /* Зменшуємо розмір тексту для малих екранів */
            }
            .nav-button {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
            .submit-btn {
                align-self: center; /* Центруємо кнопку на малих екранах */
                width: 100%; /* Повна ширина для кнопки на малих екранах */
            }
            .info {
                flex-direction: column;
                gap: 0.5rem;
            }
            .info > div {
                width: 100%;
                display: flex;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Українські Наголоси</h1>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="learn">Вивчення</div>
            <div class="tab" data-tab="edit">Редагування слів</div>
        </div>
        
        <!-- Сторінка вивчення -->
        <div class="page active" id="learn-page">            
            <div class="info">
                <div>
                    <p>Всього слів: <span id="total-count">0</span></p>
                    <p>Залишилось: <span id="remaining-count">0</span></p>
                </div>
                <div>
                    <p>Вивчено: <span id="learned-count">0</span></p>
                    <p>Поточне коло: <span id="current-round">1</span></p>
                </div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="category-label" id="current-letter"></div>
            
            <div class="card-container">
                <div class="card" id="flashcard">
                    <div class="card-face card-front" id="card-front"></div>
                    <div class="card-face card-back" id="card-back"></div>
                </div>
            </div>
            
            <div class="controls">
                <button class="nav-button btn-dont-know" id="btn-dont-know">
                    <span>&#10006;</span> Ще не знаю
                </button>
                <button class="nav-button btn-know" id="btn-know">
                    Знаю <span>&#10004;</span>
                </button>
            </div>
            
            <div class="letter-index" id="letter-index"></div>
            
            <button class="reset-button" id="reset-button">Почати заново</button>
        </div>
        
        <!-- Сторінка редагування слів -->
        <div class="page" id="edit-page">
            <h2>Редагування списку слів</h2>
            
            <div class="export-import-container">
                <button class="export-btn" id="export-btn">Експортувати слова</button>
                <label for="import-file" class="import-btn">Імпортувати слова</label>
                <input type="file" id="import-file" class="file-input" accept=".txt">
            </div>
            
            <div class="add-word-form">
                <h3>Додати нове слово</h3>
                <div class="form-group">
                    <label for="new-word">Слово з наголосом:</label>
                    <input type="text" id="new-word" placeholder="Введіть слово з великою літерою для наголосу (напр. рУчка)">
                    <small>Використовуйте велику літеру для позначення наголосу. Наприклад: рУчка, водІй</small>
                </div>
                <div class="form-group">
                    <label for="word-letter">Категорія (літера):</label>
                    <select id="word-letter">
                        <!-- Літери будуть додані через JavaScript -->
                    </select>
                </div>
                <button class="submit-btn" id="add-word-btn">Додати слово</button>
            </div>
            
            <div class="words-table-container">
                <table class="words-table" id="words-table">
                    <thead>
                        <tr>
                            <th>Слово</th>
                            <th>Категорія</th>
                            <th>Дії</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Слова будуть додані через JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Масив слів з наголосами
            const defaultWordsData = `А
агронОмія
алфАвІт
Аркушик
асиметрІя
Б
багаторазОвий
безпринцИпний
бЕшкет
блАговіст
близькИй
болотИстий
борОдавка
босОніж
боЯзнь
бурштинОвий
бюлетЕнь
В
вАги (у множині)
вантажІвка
веснЯнИй
вИгода (користь)
вигОда (зручність)
видАння
визвОльний
вимОга
вИпадок
вирАзний
вИсіти
вИтрата
вишИваний
відвезтИ
відвестИ
вІдгомін
віднестИ
вІдомість (список)
відОмість (повідомлення, дані, популярність)
вІрші
віршовИй
вітчИм
Г
гальмО, гАльма
глядАч
горошИна
граблІ
гуртОжиток
Д
данИна
дАно
децимЕтр
дЕщиця
де-Юре
джерелО
дИвлячись
дичАвіти
діалОг
добовИй
добУток
довезтИ
довестИ
довІдник
дОгмат
донестИ
дОнька
дочкА
дрОва
Е
експЕрт
Є
єретИк
Ж
жалюзІ
З
завдАння
завезтИ
завестИ
зАвжди
завчасУ
зАгадка
заіржАвілий
заіржАвіти
закінчИти
зАкладка (у книзі)
зАкрутка
залишИти
замІжня
занестИ
зАпонка
заробІток
зАставка
зАстібка
застОпорити
звИсока
здАлека
зібрАння
зобразИти
зОзла
зрАння
зрУчний
зубОжіння
І
індУстрія
К
кАмбала
каталОг
квартАл
кИшка
кіломЕтр
кінчИти
кОлесо
кОлія
кОпчений (дієприкметник)
копчЕний (прикметник)
корИсний
кОсий
котрИй
крицЕвий
крОїти
кропивА
кулінАрія
кУрятина
Л
лАте
листопАд
літОпис
лЮстро
М
мАбУть
магістЕрський
мАркетинг
мерЕжа
металУргія
мілімЕтр
Н
навчАння
нанестИ
напІй
нАскрізний
нАчинка
ненАвидіти
ненАвисний
ненАвисть
нестИ
нІздря
новИй
О
обіцЯнка
обрАння
обрУч (іменник)
одинАдцять
одноразОвий
ознАка
Олень
оптОвий
осетЕр
отАман
Оцет
П
павИч
партЕр
пЕкарський
перевезтИ
перевестИ
перЕкис
перелЯк
перенестИ
перЕпад
перЕпис
піалА
пІдданий (дієприкметник)
піддАний (іменник, істота)
пІдлітковий
пізнАння
пітнИй
піцЕрія
пОдруга
пОзначка
пОмилка
помІщик
помОвчати
понЯття
порядкОвий
посерЕдині
привезтИ
привестИ
прИморозок
принестИ
прИчіп
прОділ
промІжок
псевдонІм
Р
рАзом
рЕмінь (пояс)
рЕшето
рИнковий
рівнИна
роздрібнИй
рОзпірка
рукОпис
руслО
С
сантимЕтр
свЕрдло
серЕдина
сЕча
симетрІя
сільськогосподАрський
сімдесЯт
слИна
соломИнка
стАтуя
стовідсОтковий
стрибАти
Т
текстовИй
течіЯ
тИгровий
тисОвий
тім'янИй
травестІя
тризУб
тУлуб
У
украЇнський
уподОбання
урочИстий
усерЕдині
Ф
фартУх
фаховИй
фенОмен
фОльга
фОрзац
Х
хАос (у міфології: стихія)
хаОс (безлад)
Ц
цАрина
цемЕнт
цЕнтнер
ціннИк
Ч
чарівнИй
черговИй
читАння
чорнОзем
чорнОслив
чотирнАдцять
Ш
шляхопровІд
шовкОвий
шофЕр
Щ
щЕлепа
щИпці
щодобовИй
Я
ярмаркОвий`;

            // Ключ для локального сховища
            const STORAGE_KEY = 'ukrainianAccentsWords';
            
            // Отримання елементів DOM для вкладок
            const tabButtons = document.querySelectorAll('.tab');
            const pages = document.querySelectorAll('.page');
            
            // Отримання елементів DOM для сторінки вивчення
            const cardElement = document.getElementById('flashcard');
            const cardFront = document.getElementById('card-front');
            const cardBack = document.getElementById('card-back');
            const btnDontKnow = document.getElementById('btn-dont-know');
            const btnKnow = document.getElementById('btn-know');
            const resetButton = document.getElementById('reset-button');
            const progressBar = document.getElementById('progress-bar');
            const totalCountElement = document.getElementById('total-count');
            const remainingCountElement = document.getElementById('remaining-count');
            const learnedCountElement = document.getElementById('learned-count');
            const currentRoundElement = document.getElementById('current-round');
            const currentLetterElement = document.getElementById('current-letter');
            const letterIndexElement = document.getElementById('letter-index');
            
            // Отримання елементів DOM для сторінки редагування
            const wordsTableBody = document.querySelector('#words-table tbody');
            const newWordInput = document.getElementById('new-word');
            const wordLetterSelect = document.getElementById('word-letter');
            const addWordBtn = document.getElementById('add-word-btn');
            const exportBtn = document.getElementById('export-btn');
            const importFileInput = document.getElementById('import-file');
            const notification = document.getElementById('notification');
            
            // Стан додатку
            let words = [];
            let alphabet = [];
            let activeWords = [];
            let currentIndex = 0;
            let currentRound = 1;
            
            // Завантаження слів з локального сховища або використання стандартних
            function loadWords() {
                const savedWords = localStorage.getItem(STORAGE_KEY);
                if (savedWords) {
                    words = JSON.parse(savedWords);
                    extractAlphabet();
                } else {
                    parseDefaultWords();
                }
            }
            
            // Збереження слів у локальне сховище
            function saveWords() {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(words));
            }
            
            // Розбір стандартних слів
            function parseDefaultWords() {
                // Розбиваємо текст на рядки
                const lines = defaultWordsData.split('\n');
                words = [];
                alphabet = [];
                let currentLetter = '';
                
                // Обробляємо дані
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    // Якщо рядок містить лише одну літеру, це заголовок категорії
                    if (line.length === 1 && /[А-ЯІЇЄҐ]/.test(line)) {
                        currentLetter = line;
                        alphabet.push(currentLetter);
                    } else if (line) {
                        // Додаємо слово до масиву
                        words.push({
                            word: line.replace(/[А-ЯІЇЄҐ]/g, match => match.toLowerCase()), // Нормалізуємо слово для показу
                            original: line, // Зберігаємо оригінальний варіант для показу
                            letter: currentLetter,
                            learned: false,
                            id: Date.now() + '-' + Math.random().toString(36).substr(2, 9) // Унікальний ID
                        });
                    }
                }
                
                saveWords();
            }
            
            // Витягнення унікальних літер з масиву слів
            function extractAlphabet() {
                alphabet = [...new Set(words.map(word => word.letter))].sort();
            }
            
            // Встановити обробники подій для вкладок
            function setupTabs() {
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Активувати вибрану вкладку
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        
                        // Показати відповідну сторінку
                        const tabId = button.getAttribute('data-tab');
                        pages.forEach(page => page.classList.remove('active'));
                        document.getElementById(`${tabId}-page`).classList.add('active');
                        
                        // Оновити вміст сторінки редагування, якщо вона активна
                        if (tabId === 'edit') {
                            updateWordsTable();
                            updateLetterDropdown();
                        }
                    });
                });
            }
            
            // Функція для оновлення таблиці слів на сторінці редагування
            function updateWordsTable() {
                wordsTableBody.innerHTML = '';
                
                // Сортування слів за літерою та текстом
                const sortedWords = [...words].sort((a, b) => {
                    if (a.letter !== b.letter) {
                        return a.letter.localeCompare(b.letter);
                    }
                    return a.original.localeCompare(b.original);
                });
                
                sortedWords.forEach(word => {
                    const row = document.createElement('tr');
                    
                    const wordCell = document.createElement('td');
                    wordCell.textContent = word.original;
                    row.appendChild(wordCell);
                    
                    const letterCell = document.createElement('td');
                    letterCell.textContent = word.letter;
                    row.appendChild(letterCell);
                    
                    const actionsCell = document.createElement('td');
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn';
                    deleteBtn.textContent = 'Видалити';
                    deleteBtn.addEventListener('click', () => {
                        deleteWord(word.id);
                    });
                    actionsCell.appendChild(deleteBtn);
                    row.appendChild(actionsCell);
                    
                    wordsTableBody.appendChild(row);
                });
            }
            
            // Функція для оновлення випадаючого списку літер
            function updateLetterDropdown() {
                wordLetterSelect.innerHTML = '';
                
                alphabet.forEach(letter => {
                    const option = document.createElement('option');
                    option.value = letter;
                    option.textContent = letter;
                    wordLetterSelect.appendChild(option);
                });
                
                // Додати опцію для нової літери
                const newLetterOption = document.createElement('option');
                newLetterOption.value = 'new';
                newLetterOption.textContent = '-- Нова літера --';
                wordLetterSelect.appendChild(newLetterOption);
            }
            
            // Функція для видалення слова
            function deleteWord(id) {
                const index = words.findIndex(word => word.id === id);
                if (index !== -1) {
                    words.splice(index, 1);
                    saveWords();
                    updateWordsTable();
                    showNotification('Слово успішно видалено', 'success');
                    
                    // Оновити алфавіт після видалення
                    extractAlphabet();
                    updateLetterDropdown();
                    createLetterIndex();
                    
                    // Оновити активні слова для вивчення
                    activeWords = words.filter(word => !word.learned);
                    if (activeWords.length === 0 || currentIndex >= activeWords.length) {
                        currentIndex = 0;
                    }
                    showCurrentCard();
                    updateProgress();
                }
            }
            
            // Функція для додавання нового слова
            function addNewWord() {
                const wordValue = newWordInput.value.trim();
                let letterValue = wordLetterSelect.value;
                
                // Перевірка на правильність введення
                if (!wordValue) {
                    showNotification('Введіть слово з наголосом', 'error');
                    return;
                }
                
                // Перевірка на наявність наголосу (великої літери)
                if (!/[А-ЯІЇЄҐ]/.test(wordValue)) {
                    showNotification('Слово повинно містити наголос (велику літеру)', 'error');
                    return;
                }
                
                // Якщо обрано "Нова літера", запитати її у користувача
                if (letterValue === 'new') {
                    const newLetter = prompt('Введіть нову літеру категорії (одна буква):');
                    if (!newLetter || newLetter.length !== 1 || !/[А-ЯІЇЄҐ]/.test(newLetter)) {
                        showNotification('Неправильно введена літера категорії', 'error');
                        return;
                    }
                    letterValue = newLetter.toUpperCase();
                    
                    // Додаємо нову літеру до алфавіту, якщо її ще немає
                    if (!alphabet.includes(letterValue)) {
                        alphabet.push(letterValue);
                        alphabet.sort();
                        updateLetterDropdown();
                        createLetterIndex();
                    }
                }
                
                // Додаємо нове слово до масиву
                const newWord = {
                    word: wordValue.replace(/[А-ЯІЇЄҐ]/g, match => match.toLowerCase()), // Нормалізуємо слово для показу
                    original: wordValue, // Зберігаємо оригінальний варіант для показу
                    letter: letterValue,
                    learned: false,
                    id: Date.now() + '-' + Math.random().toString(36).substr(2, 9) // Унікальний ID
                };
                
                words.push(newWord);
                saveWords();
                updateWordsTable();
                
                // Скидаємо форму
                newWordInput.value = '';
                
                // Оновлюємо активні слова для вивчення
                activeWords = words.filter(word => !word.learned);
                showCurrentCard();
                updateProgress();
                
                showNotification('Слово успішно додано', 'success');
            }
            
            // Функція для експорту слів
            function exportWords() {
                let exportText = '';
                
                // Групуємо слова за літерами
                const wordsByLetter = {};
                alphabet.forEach(letter => {
                    wordsByLetter[letter] = [];
                });
                
                words.forEach(word => {
                    wordsByLetter[word.letter].push(word.original);
                });
                
                // Форматуємо текстовий експорт
                alphabet.forEach(letter => {
                    exportText += letter + '\n';
                    wordsByLetter[letter].sort().forEach(word => {
                        exportText += word + '\n';
                    });
                });
                
                // Створюємо файл для завантаження
                const blob = new Blob([exportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'українські_наголоси.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Список слів експортовано', 'success');
            }
            
            // Функція для імпорту слів
            function importWords(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const content = e.target.result;
                    const lines = content.split('\n');
                    
                    const newWords = [];
                    const newAlphabet = [];
                    let currentLetter = '';
                    
                    // Обробляємо файл
                    for (let i = 0; i < lines.length; i++) {
                        const line = lines[i].trim();
                        // Якщо рядок містить лише одну літеру, це заголовок категорії
                        if (line.length === 1 && /[А-ЯІЇЄҐ]/.test(line)) {
                            currentLetter = line;
                            if (!newAlphabet.includes(currentLetter)) {
                                newAlphabet.push(currentLetter);
                            }
                        } else if (line) {
                            // Перевірка на наявність наголосу
                            if (!/[А-ЯІЇЄҐ]/.test(line)) {
                                showNotification(`Помилка у слові "${line}": відсутній наголос (велика літера)`, 'error');
                                continue;
                            }
                            
                            // Додаємо слово до масиву
                            newWords.push({
                                word: line.replace(/[А-ЯІЇЄҐ]/g, match => match.toLowerCase()), // Нормалізуємо слово для показу
                                original: line, // Зберігаємо оригінальний варіант для показу
                                letter: currentLetter,
                                learned: false,
                                id: Date.now() + '-' + Math.random().toString(36).substr(2, 9) + '-' + i // Унікальний ID
                            });
                        }
                    }
                    
                    // Перевіряємо, чи є хоч якісь слова
                    if (newWords.length === 0) {
                        showNotification('Не знайдено слів для імпорту', 'error');
                        return;
                    }
                    
                    // Запитуємо користувача, що робити зі словами
                    const action = confirm('Виберіть дію:\nОК - замінити всі слова\nСкасувати - додати до існуючих');
                    
                    if (action) {
                        // Замінюємо всі слова
                        words = newWords;
                        alphabet = newAlphabet.sort();
                    } else {
                        // Додаємо нові слова
                        words = [...words, ...newWords];
                        alphabet = [...new Set([...alphabet, ...newAlphabet])].sort();
                    }
                    
                    saveWords();
                    updateWordsTable();
                    updateLetterDropdown();
                    createLetterIndex();
                    
                    // Оновлюємо активні слова для вивчення
                    activeWords = words.filter(word => !word.learned);
                    if (activeWords.length === 0 || currentIndex >= activeWords.length) {
                        currentIndex = 0;
                    }
                    showCurrentCard();
                    updateProgress();
                    
                    showNotification(`Імпортовано ${newWords.length} слів`, 'success');
                };
                
                reader.readAsText(file);
                // Скидаємо інпут для можливості повторного імпорту того ж файлу
                event.target.value = null;
            }
            
            // Функція для показу сповіщення
            function showNotification(message, type) {
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Функція для початку нового раунду (для сторінки вивчення)
            function startNewRound() {
                activeWords = words.filter(word => !word.learned);
                if (activeWords.length === 0) {
                    // Всі слова вивчені
                    cardFront.textContent = "Всі слова вивчені! 🎉";
                    cardBack.textContent = "Всі слова вивчені! 🎉";
                    btnKnow.disabled = true;
                    btnDontKnow.disabled = true;
                } else {
                    // Перемішуємо слова для нового раунду
                    shuffleArray(activeWords);
                    currentIndex = 0;
                    currentRound++;
                    currentRoundElement.textContent = currentRound;
                    showCurrentCard();
                }
                updateProgress();
            }
            
            // Перемішування масиву
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            
            // Показ поточної картки
            function showCurrentCard() {
                if (activeWords.length === 0 || currentIndex >= activeWords.length) {
                    startNewRound();
                    return;
                }
                
                const currentWord = activeWords[currentIndex];
                
                // Видаляємо наголос для передньої сторони
                const wordWithoutAccent = currentWord.word.replace(/[А-ЯІЇЄҐ]/g, letter => letter.toLowerCase());
                
                cardFront.textContent = wordWithoutAccent;
                cardBack.textContent = currentWord.original;
                cardElement.classList.remove('flipped');
                
                // Оновлюємо категорію
                currentLetterElement.textContent = `Категорія: ${currentWord.letter}`;
                
                // Оновлюємо активну літеру в індексі
                updateLetterIndex(currentWord.letter);
            }
            
            // Створюємо індекс літер
            function createLetterIndex() {
                letterIndexElement.innerHTML = '';
                alphabet.forEach(letter => {
                    const button = document.createElement('button');
                    button.textContent = letter;
                    button.className = 'letter-button';
                    button.setAttribute('data-letter', letter);
                    button.addEventListener('click', () => {
                        jumpToLetter(letter);
                    });
                    letterIndexElement.appendChild(button);
                });
            }
            
            // Оновлюємо активну літеру в індексі
            function updateLetterIndex(activeLetter) {
                document.querySelectorAll('.letter-button').forEach(button => {
                    if (button.getAttribute('data-letter') === activeLetter) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
            }
            
            // Переходимо до літери
            function jumpToLetter(letter) {
                // Шукаємо перше активне слово з цією літерою
                const index = activeWords.findIndex(word => word.letter === letter);
                if (index !== -1) {
                    currentIndex = index;
                    showCurrentCard();
                }
            }
            
            // Оновлення прогресу
            function updateProgress() {
                const totalCount = words.length;
                const learnedCount = words.filter(word => word.learned).length;
                const remainingCount = totalCount - learnedCount;
                
                totalCountElement.textContent = totalCount;
                remainingCountElement.textContent = remainingCount;
                learnedCountElement.textContent = learnedCount;
                currentRoundElement.textContent = currentRound;
                
                const progressPercentage = (learnedCount / totalCount) * 100;
                progressBar.style.width = `${progressPercentage}%`;
            }
            
            // Встановлюємо обробники подій для сторінки вивчення
            function setupLearningPage() {
                // Перевертання картки при натисканні
                cardElement.addEventListener('click', function() {
                    cardElement.classList.toggle('flipped');
                });
                
                // Кнопка "Не знаю"
                btnDontKnow.addEventListener('click', function() {
                    currentIndex++;
                    if (currentIndex >= activeWords.length) {
                        startNewRound();
                    } else {
                        showCurrentCard();
                    }
                });
                
                // Кнопка "Знаю"
                btnKnow.addEventListener('click', function() {
                    const currentWord = activeWords[currentIndex];
                    const originalIndex = words.findIndex(word => word.id === currentWord.id);
                    if (originalIndex !== -1) {
                        words[originalIndex].learned = true;
                        saveWords();
                    }
                    
                    // Видаляємо слово з активних
                    activeWords.splice(currentIndex, 1);
                    
                    if (activeWords.length === 0) {
                        startNewRound();
                    } else if (currentIndex >= activeWords.length) {
                        currentIndex = 0;
                        showCurrentCard();
                    } else {
                        showCurrentCard();
                    }
                    
                    updateProgress();
                });
                
                // Кнопка скидання
                resetButton.addEventListener('click', function() {
                    if (confirm('Ви впевнені, що хочете почати заново? Весь прогрес буде втрачено.')) {
                        words.forEach(word => word.learned = false);
                        saveWords();
                        activeWords = [...words];
                        shuffleArray(activeWords);
                        currentIndex = 0;
                        currentRound = 1;
                        btnKnow.disabled = false;
                        btnDontKnow.disabled = false;
                        showCurrentCard();
                        updateProgress();
                    }
                });
            }
            
            // Встановлюємо обробники подій для сторінки редагування
            function setupEditPage() {
                // Кнопка "Додати слово"
                addWordBtn.addEventListener('click', addNewWord);
                
                // Enter на полі вводу нового слова
                newWordInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        addNewWord();
                    }
                });
                
                // Кнопка "Експортувати слова"
                exportBtn.addEventListener('click', exportWords);
                
                // Поле для імпорту файлу
                importFileInput.addEventListener('change', importWords);
            }
            
            // Ініціалізація додатку
            function init() {
                loadWords();
                setupTabs();
                setupLearningPage();
                setupEditPage();
                
                // Ініціалізація сторінки вивчення
                activeWords = [...words];
                shuffleArray(activeWords);
                createLetterIndex();
                showCurrentCard();
                updateProgress();
            }
            
            // Запуск додатку
            init();
        });
    </script>
</body>
</html>